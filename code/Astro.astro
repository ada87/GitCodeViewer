---
/**
 * Astro Sample Code - Task Management Component
 *
 * @see https://docs.astro.build/
 */

interface Task {
    id: number;
    title: string;
    priority: 'low' | 'medium' | 'high' | 'critical';
    status: 'pending' | 'in_progress' | 'review' | 'completed';
}

interface Props {
    tasks: Task[];
    title?: string;
}

const { tasks = [], title = "Task Manager" } = Astro.props;

const priorityColors = {
    low: 'green',
    medium: 'blue',
    high: 'orange',
    critical: 'red'
};

const statusLabels = {
    pending: 'Pending',
    in_progress: 'In Progress',
    review: 'Review',
    completed: 'Completed'
};
---

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{title}</title>
    <style>
        .task-manager {
            font-family: system-ui, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
        }

        .task-list {
            list-style: none;
            padding: 0;
        }

        .task-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            margin: 0.5rem 0;
            background: #f5f5f5;
            border-radius: 8px;
            border-left: 4px solid #3b82f6;
        }

        .task-item[data-priority="high"] {
            border-left-color: #f59e0b;
        }

        .task-item[data-priority="critical"] {
            border-left-color: #ef4444;
        }

        .badge {
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .badge--low { background: #dcfce7; color: #166534; }
        .badge--medium { background: #dbeafe; color: #1e40af; }
        .badge--high { background: #fef3c7; color: #92400e; }
        .badge--critical { background: #fee2e2; color: #991b1b; }
    </style>
</head>
<body>
    <div class="task-manager">
        <h1>{title}</h1>

        <p>Total Tasks: {tasks.length}</p>

        <ul class="task-list">
            {tasks.map((task) => (
                <li class="task-item" data-priority={task.priority}>
                    <span class="task-title">{task.title}</span>
                    <div class="task-meta">
                        <span class={`badge badge--${task.priority}`}>
                            {task.priority}
                        </span>
                        <span class={`badge badge--${task.priority}`}>
                            {statusLabels[task.status]}
                        </span>
                    </div>
                </li>
            ))}
        </ul>

        {tasks.length === 0 && (
            <p>No tasks found.</p>
        )}
    </div>
</body>
</html>

<script>
    // Client-side TypeScript
    interface Task {
        id: number;
        title: string;
    }

    function addTask(task: Task): void {
        console.log('Adding task:', task);
    }

    addTask({ id: 1, title: 'New task' });
</script>

---
// Component Imports
import MainHead from '../components/MainHead.astro';
import Button from '../components/Button.astro';
import Footer from '../components/Footer.astro';
import Nav from '../components/Nav.astro';

// Component Script:
// You can write any JavaScript/TypeScript that you'd like here.
// It will run during the build, but never in the browser.
// All variables are available to use in the HTML template below.
let title = 'GitCode Viewer';
let description = 'The perfect offline Git client for developers.';
const permalink = 'https://gitcodeviewer.com/';
let lang = 'en';

// Data Fetching example
const response = await fetch('https://api.github.com/repos/ada87/GitCodeViewer');
const repoData = await response.json();
const stars = repoData.stargazers_count || 0;

// Conditional logic for classes
const isProduction = import.meta.env.PROD;
const containerClass = isProduction ? 'container-prod' : 'container-dev';

const features = [
  'Offline Git Access',
  'Syntax Highlighting (100+ langs)',
  'Mermaid & Markdown Support',
  'Jupyter Notebook Rendering',
  'Dark/Light Mode'
];
---
<html lang={lang}>
  <head>
    <MainHead title={title} description={description} />
    <style>
      /* Scoped Styles */
      header {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 2em 0;
      }
      .hero {
        background: linear-gradient(to bottom, #1a1a2e, #16213e);
        color: white;
        padding: 4rem 2rem;
        text-align: center;
        border-radius: 12px;
        margin: 1rem 0;
      }
      .title {
        font-size: 3em;
        font-weight: 800;
        margin: 0;
      }
      .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        padding: 2rem 0;
      }
      .card {
        padding: 1.5rem;
        border: 1px solid #eee;
        border-radius: 8px;
        transition: transform 0.2s;
      }
      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      }
    </style>
  </head>

  <body>
    <Nav />

    <header class={containerClass}>
      <div class="hero">
        <h1 class="title">{title}</h1>
        <p>{description}</p>
        <div class="stars-badge">
          ⭐ {stars} GitHub Stars
        </div>
        <Button href="https://play.google.com/store/apps/details?id=com.xdnote.codeviewer">
          Download on Google Play
        </Button>
      </div>
    </header>

    <main class="wrapper">
      <section class="intro">
        <h2>Why Code Viewer?</h2>
        <p>
          Reading code on mobile devices has always been painful. 
          We fixed that by building a high-performance rendering engine 
          on top of React Native and CodeMirror.
        </p>
      </section>

      <section class="features">
        <h3>Key Features</h3>
        <div class="features-grid">
          {features.map((feature) => (
            <div class="card">
              <h4>✅ Supported</h4>
              <p>{feature}</p>
            </div>
          ))}
        </div>
      </section>

      <section class="demo">
        <h3>Try it yourself</h3>
        <p>
          Clone this repository within the app to see 
          syntax highlighting in action.
        </p>
        <pre><code>
          git clone https://github.com/ada87/GitCodeViewer.git
        </code></pre>
      </section>
    </main>

    <Footer />
    
    <script>
      // Client-side JavaScript
      console.log('Welcome to Code Viewer documentation!');
      
      const buttons = document.querySelectorAll('button');
      buttons.forEach(btn => {
        btn.addEventListener('click', () => {
          console.log('Button clicked');
        });
      });
    </script>
  </body>
</html>